(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-readHistory"],{1900:function(t,e,a){"use strict";a.r(e);var i=a("439e"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"439e":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223");var n=i(a("2634")),o=i(a("2fdc")),r=i(a("d3e8")),s=i(a("d5b4")),d=a("a0d8"),c=a("8d2a"),u={components:{uniLoadMore:s.default,empty:r.default},data:function(){return{loadingType:"more",productList:[],searchParam:{pageNum:1,pageSize:6}}},onLoad:function(t){this.loadData()},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.searchParam.pageNum++,this.loadData()},onNavigationBarButtonTap:function(t){var e=t.index,a=this;0===e&&uni.showModal({title:"Hint",content:"Do you want to clear view history?",success:function(t){t.confirm&&(0,c.clearReadHistory)().then((function(t){a.loadData("refresh")}))}})},filters:{formatDateTime:function(t){if(null==t||""===t)return"N/A";var e=new Date(t);return(0,d.formatDate)(e,"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var t=arguments,e=this;return(0,o.default)((0,n.default)().mark((function a(){var i,o;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"add",o=t.length>1?t[1]:void 0,"add"!==i){a.next=8;break}if("nomore"!==e.loadingType){a.next=5;break}return a.abrupt("return");case 5:e.loadingType="loading",a.next=9;break;case 8:e.loadingType="more";case 9:"refresh"===i&&(e.searchParam.pageNum=1,e.productList=[]),(0,c.fetchReadHistoryList)(e.searchParam).then((function(t){var a=t.data.list;0===a.length?(e.loadingType="nomore",e.searchParam.pageNum--):(a.length<e.searchParam.pageSize?(e.loadingType="nomore",e.searchParam.pageNum--):e.loadingType="more",e.productList=e.productList.concat(a)),"refresh"===i&&(1==o?uni.hideLoading():uni.stopPullDownRefresh())}));case 11:case"end":return a.stop()}}),a)})))()},navToDetailPage:function(t){var e=t.productId;uni.navigateTo({url:"/pages/product/product?id=".concat(e)})},stopPrevent:function(){}}};e.default=u},"8d2a":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.clearReadHistory=function(){return(0,n.default)({method:"POST",url:"/member/readHistory/clear"})},e.createReadHistory=function(t){return(0,n.default)({method:"POST",url:"/member/readHistory/create",data:t})},e.fetchReadHistoryList=function(t){return(0,n.default)({method:"GET",url:"/member/readHistory/list",params:t})};var n=i(a("2965"))},a704:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniLoadMore:a("d5b4").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[null==t.productList||0===t.productList.length?a("empty"):t._e(),a("v-uni-view",{staticClass:"hot-section"},t._l(t.productList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"guess-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navToDetailPage(e)}}},[a("v-uni-view",{staticClass:"image-wrapper"},[a("v-uni-image",{attrs:{src:e.productPic,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"txt"},[a("v-uni-text",{staticClass:"title clamp"},[t._v(t._s(e.productName))]),a("v-uni-text",{staticClass:"title2"},[t._v(t._s(e.productSubTitle))]),a("v-uni-view",{staticClass:"hor-txt"},[a("v-uni-text",{staticClass:"price"},[t._v("$"+t._s(e.productPrice))]),a("v-uni-text",{staticClass:"time"},[t._v(t._s(t._f("formatDateTime")(e.createTime)))])],1)],1)],1)})),1),a("uni-load-more",{attrs:{status:t.loadingType}})],1)},o=[]},c25e:function(t,e,a){"use strict";a.r(e);var i=a("a704"),n=a("1900");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("f385");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"106095a8",null,!1,i["a"],void 0);e["default"]=s.exports},dd8e:function(t,e,a){var i=a("f598");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("43f27633",i,!0,{sourceMap:!1,shadowMode:!1})},f385:function(t,e,a){"use strict";var i=a("dd8e"),n=a.n(i);n.a},f598:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-106095a8],\n.content[data-v-106095a8]{background:#f8f8f8}body.?%PAGE?%[data-v-106095a8]{background:#f8f8f8}.hot-section[data-v-106095a8]{display:flex;flex-wrap:wrap;padding:0 %?30?%;margin-top:%?16?%;background:#fff}.hot-section .guess-item[data-v-106095a8]{display:flex;flex-direction:row;width:100%;padding-bottom:%?40?%}.hot-section .image-wrapper[data-v-106095a8]{width:30%;height:%?250?%;border-radius:3px;overflow:hidden}.hot-section .image-wrapper uni-image[data-v-106095a8]{width:100%;height:100%;opacity:1}.hot-section .title[data-v-106095a8]{font-size:%?32?%;color:#303133;line-height:%?80?%}.hot-section .title2[data-v-106095a8]{font-size:%?24?%;color:#909399;line-height:%?40?%;height:%?80?%;overflow:hidden;text-overflow:ellipsis;display:block}.hot-section .price[data-v-106095a8]{font-size:%?32?%;color:#fa436a;line-height:%?80?%}.hot-section .txt[data-v-106095a8]{width:70%;display:flex;flex-direction:column;padding-left:%?40?%}.hot-section .hor-txt[data-v-106095a8]{display:flex;justify-content:space-between}.hot-section .time[data-v-106095a8]{font-size:%?24?%;color:#303133;line-height:%?80?%}',""]),t.exports=e}}]);